import { Sales } from "./min_heap";
import { Shopping } from "./max_heap";
import { Node } from "./class_node";

let n : number = 1;
let class_sale : Sales = new Sales(10);
let class_shopping : Shopping = new Shopping(10);
let history : string = "";

//╔════════════════════════════════  FUNCIÓN PARA EMPAREJAR TODO  ══════════════════════════════════════════════════╗
function matchOrders(){
    let price_max : number = class_shopping.showPriceRoot();

    let company_max : string = class_shopping.showProductRoot();
    
    let amount_max : number = class_shopping.showAmountRoot();

    let result : string = class_sale.searchMinMatching(price_max, amount_max, company_max);

    if (result === "T"){
        history +=  "║ #" + n + " " +class_shopping.deleteRoot() + "\n"
        n ++
        return history
    } else if (result == "N") {
        console.log("No se hizo la transacción |" + ` Cantidad solicitada: ${amount_max}` +
        ` | Cantidad disponible ${class_sale.showAmountRoot()}`);
    } else {
        console.log(`║No se encontró ningún producto con el precio de ${price_max}` +
            ` O no se encontró una compañía llamada ${company_max}`);
    } 
}
//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

//╔══════════════════════════════════════  INGRESAR VENTAS  ════════════════════════════════════════════════════════╗
//--------------| Agregar Ventas |--------------------|
class_sale.insert(new Node(20, "Pollo", 5));
class_sale.insert(new Node(20, "Carne", 5));
class_sale.insert(new Node(20, "Pizza", 5));





//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

//╔════════════════════════════════════════  INGRESAR COMPRAS  ═════════════════════════════════════════════════════════════╗
//--------------| Agregar Compras |--------------------|
class_shopping.insert(new Node(20, "Pollo", 5));
class_shopping.insert(new Node(4, "Carne", 5));
class_shopping.insert(new Node(4, "Pizza", 5));







//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
//╔═════════════════════════════════════════════  MOSTRAR VENTAS  ══════════════════════════════════════════════════════════╗
console.log("╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗");
//--------------| Mostrar Ventas |--------------------|
console.log("Ventas disponibles:");
console.log(class_sale.showAll());
console.log("╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝");

//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

//╔═════════════════════════════════════  MOSTRAR COMPRAS  ═════════════════════════════════════════════════════════════════╗
console.log("╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗");
//--------------| Mostrar Compras |--------------------|
console.log("Compras disponibles:");
console.log(class_shopping.showAll());

console.log("╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝");

//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
console.log("");
//╔═════════════════════════════════════  REALIZAR Y MOSTRAR TRANSACCIONES  ═══════════════════════════════════════════════╗
console.log("╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗");
//--------------| Transacciones Hechas |--------------------|
console.log("TRANSACCIONES REALIZADAS:");
matchOrders();
matchOrders();
matchOrders();





console.log(history);
console.log("╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝");

//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
console.log("");

//╔═════════════════════════════════════════════  MOSTRAR VENTAS  ══════════════════════════════════════════════════════════╗
console.log("╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗");
//--------------| Mostrar Ventas |--------------------|
console.log("Ventas disponibles:");
console.log(class_sale.showAll());
console.log("╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝");

//╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝


//╔═════════════════════════════════════  MOSTRAR COMPRAS  ═════════════════════════════════════════════════════════════════╗
console.log("╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗");
//--------------| Mostrar Compras |--------------------|
console.log("Compras disponibles:");
console.log(class_shopping.showAll());
console.log("╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝");